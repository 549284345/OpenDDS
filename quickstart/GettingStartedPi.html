---
layout: page
title: Raspberry Pi
categories: [opendds]
tags: []
order: 12
---
The goal of this guide is help you download and compile OpenDDS for Linux on the <a hef="https://www.raspberrypi.org/">Raspberry Pi</a> and run a simple example. 
<div class="bodytext" align="justify">
  <a name="Build Directions"><span class="headertext">Build Directions</span></a>
  <ol>
    <p>For this guide you need a Raspberry Pi set up with Raspbian Linux and connected to a local network and a Linux host system connected to the same network. This guide also assumes you know the address and user credentials of the Pi.</p>
    <li><p>Ensure that your host environment has:</p>
      <ul>
        <li>a C++ compiler</li>
        <li>GNU Make</li>
        <li>Perl</li>
	<li>Optional Java SDK 1.5 through 1.8 for Java JNI binding support</li>
      </ul>
      <p>See <a href="../documents/building.html">Building</a> for a complete list of dependencies and supported platforms.</p>
    </li>
    <li>Download and extract the latest tar.gz file from the <a href="http://download.objectcomputing.com/OpenDDS/">download site</a>.</li>
    <li>Download and extract the <a href="https://github.com/raspberrypi/tools">Raspberry Pi toolchain from GitHub</a>. Copy the absolute path to it, because we need to pass that to OpenDDS's build system.</li>
    <li>Enter the OpenDDS-&lt;version&gt; directory</li>
    <li><code>./configure --target=linux-cross\</code></br><code>--target-compiler="PITOOLS/tools/arm-bcm2708/gcc-linaro-arm-linux-gnueabihf-raspbian-x64/bin/arm-linux-gnueabihf-g++"</code>, replacing PITOOLS with the absolute path of the toolchain</li>
    <li><code>make</code></li>
  </ol>

  <p>See <a href="{{ site.baseurl }}/support.html">Support</a> if you encounter problems with configuration or building.</p>

</div>

<div class="bodytext" align="justify">
  <a name="Copying OpenDDS to the Pi"><span class="headertext">Copying OpenDDS to the Pi</span></a>
  <p>There are multiple ways to do this, including using a flash drive. This method assumes you are running the Pi "headless" (without a keyboard, mouse, and monitor).</p>
  <ol>
    <li>Leave the OpenDDS-&lt;version&gt; directory: <code>cd ..</code></li>
    <li><code>tar czf OpenDDS.tar.gz OpenDDS-&lt;version&gt;</code></li>
    <li><code>scp OpenDDS.tar.gz USER@ADDRESS:</code> where USER and ADDRESS are the username and IP address of your Raspberry Pi. It will ask you for the password for the user on the Pi.</li>
    <li><code>ssh USER@ADDRESS</code> to access the Pi, taking the same information as the previous command.</li>
    <li><code>tar xzf OpenDDS.tar.gz</code></li>
  </ol>
</div>

<div class="bodytext" align="justify">
  <a name="Run the Messenger Example"><span class="headertext">Run the Messenger Example</span></a>
  <ol>
    <li>While still in ssh on the Pi, enter the OpenDDS-&lt;version&gt; directory</li>
    <li><code>export DDS_ROOT="$PWD/build/target"</code></li>
    <li><code>export ACE_ROOT="$DDS_ROOT/ACE_wrappers"</code></li>
    <li><code>export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:"$ACE_ROOT/lib":"$DDS_ROOT/lib"</code></li>
    <li><code>export PATH=${PATH}:"$ACE_ROOT/bin":"$DDS_ROOT/bin"</code></li>
    <li><code>cd $DDS_ROOT/DevGuideExamples/DCPS/Messenger</code> for C++ example or <code>cd $DDS_ROOT/java/tests/messenger</code> for Java example</li>
    <li><code>./run_test.pl</code></li>
  </ol>
  <p>The Messenger Example starts an InfoRepo, publisher, and subscriber.
    The InfoRepo allows the publisher and subscriber to find each other.
    Once the publisher finds the subscriber, it sends 10 messages to the subscriber and waits 30 seconds for the subscriber to acknowledge the messages.
  </p>
</div>

<div class="bodytext" align="justify">
  <a name="Next Steps"><span class="headertext">Next Steps</span></a>
  <p>See Chapter 2 of the <a href="http://download.objectcomputing.com/OpenDDS/OpenDDS-latest.pdf">Developer's Guide</a> for a detailed explanation of the Messenger C++ Example or Chapter 11 for the Java Example.</p>
</div>
